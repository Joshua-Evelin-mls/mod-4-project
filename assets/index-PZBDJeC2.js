(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))c(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();const V=async()=>{try{const e=await fetch("https://meowfacts.herokuapp.com/");if(!e.ok)throw Error(`Fetch failed. ${e.status} ${e.statusText}`);return{data:await e.json(),error:null}}catch(e){return console.log(`Error: ${e.message}`),{data:null,error:e}}},_=async()=>{let e=null,t=null;try{const n=await fetch("https://api.thecatapi.com/v1/images/search?limit=10");n.ok?e=await n.json():(console.log("error: ",n.status,n.statusText),t=n.status+":"+n.statusText)}catch(n){console.log("oops something went wrong"),t=n}return{data:e,error:t}},R=async()=>{try{const e=await fetch("https://meowfacts.herokuapp.com/?lang=esp");if(!e.ok)throw Error(`Fetch failed. ${e.status} ${e.statusText}`);return{data:await e.json(),error:null}}catch(e){return console.log(`Error: ${e.message}`),{data:null,error:e}}};let q=JSON.parse(localStorage.getItem("collection"))?.data||[],C=[],D=JSON.parse(localStorage.getItem("spanishCollection"))?.data||[];const A=document.querySelector("#app");document.querySelector("#pop-up");const F=document.querySelector("#inject"),G=async()=>{C=(await _()).data,F.innerHTML="";let e=0;for(let t of C){let n=document.createElement("li");n.dataset.id=e,n.classList.add("pop-up-collected-card");let c=document.createElement("figure");c.classList.add("pop-up-card-figure"),n.append(c);let a=document.createElement("div");a.classList.add("pop-up-card-bg"),a.classList.add("pop-up-card"),c.append(a),a.style.backgroundImage=`url('${t.url}')`,F.append(n),e++}},B=async()=>{let e=JSON.parse(localStorage.getItem("collection"))?.data||[];console.log(`Collection: ${e}`);let t=JSON.parse(localStorage.getItem("facts"))||{};const n=new Set(JSON.parse(localStorage.getItem("deletedCards"))||[]);let c=await Promise.all(e.map(async a=>{if(t[a.url])return t[a.url];const l=(await V()).data.data;return t[a.url]=l,l}));localStorage.setItem("facts",JSON.stringify(t));for(let a=0;a<e.length;a++){let s=e[a],l=c[a];if(n.has(s.url))continue;let o=document.createElement("div");o.classList.add("full-card");let d=document.createElement("div");d.classList.add("inner-card");const r=document.createElement("button");r.classList.add("x-button"),r.type="button",r.textContent="x";let i=document.createElement("li");i.classList.add("collected-card");let u=document.createElement("figure");u.classList.add("card-figure"),i.append(u);let p=document.createElement("div");p.classList.add("card-bg","card"),p.style.backgroundImage=`url('${s.url}')`,u.append(p);let m=document.createElement("li");m.classList.add("collected-card-back");let g=document.createElement("div");g.classList.add("card-figure"),m.append(g);let f=document.createElement("div");f.classList.add("card"),g.append(f);let h=document.createElement("div");h.classList.add("card-bg"),f.append(h);let y=document.createElement("p");y.classList.add("did-you-know"),y.textContent="Did You Know?";let L=document.createElement("p");L.classList.add("cat-fact"),L.textContent=l,h.append(y,L),d.append(i,m),o.append(d,r),o.addEventListener("click",()=>{d.classList.toggle("flipped")}),r.addEventListener("click",()=>{n.add(s.url),localStorage.setItem("deletedCards",JSON.stringify([...n]));const v=e.findIndex(x=>x.url===s.url);v!==-1&&e.splice(v,1),localStorage.setItem("collection",JSON.stringify({data:structuredClone(e)})),o.remove()}),A.append(o)}},J=async()=>{let e=JSON.parse(localStorage.getItem("spanishCollection"))?.data||[],t=JSON.parse(localStorage.getItem("spanishFacts"))||{};const n=new Set(JSON.parse(localStorage.getItem("deletedCards"))||[]);let c=await Promise.all(e.map(async a=>{if(t[a.url])return t[a.url];const l=(await R()).data.data;return t[a.url]=l,l}));localStorage.setItem("spanishFacts",JSON.stringify(t));for(let a=0;a<e.length;a++){let s=e[a],l=c[a];if(n.has(s.url))continue;let o=document.createElement("div");o.classList.add("full-card");let d=document.createElement("div");d.classList.add("inner-card");const r=document.createElement("button");r.classList.add("x-button"),r.type="button",r.textContent="x";let i=document.createElement("li");i.classList.add("collected-card");let u=document.createElement("figure");u.classList.add("card-figure"),i.append(u);let p=document.createElement("div");p.classList.add("card-bg","card"),p.style.backgroundImage=`url('${s.url}')`,u.append(p);let m=document.createElement("li");m.classList.add("collected-card-back");let g=document.createElement("div");g.classList.add("card-figure"),m.append(g);let f=document.createElement("div");f.classList.add("card"),g.append(f);let h=document.createElement("div");h.classList.add("card-bg"),f.append(h);let y=document.createElement("p");y.classList.add("did-you-know"),y.textContent="¿Sabías que...?";let L=document.createElement("p");L.classList.add("cat-fact"),L.textContent=l,h.append(y,L),d.append(i,m),o.append(d,r),o.addEventListener("click",()=>{d.classList.toggle("flipped")}),r.addEventListener("click",()=>{n.add(s.url),localStorage.setItem("deletedCards",JSON.stringify([...n]));const v=e.findIndex(x=>x.url===s.url);v!==-1&&e.splice(v,1),localStorage.setItem("spanishCollection",JSON.stringify({data:structuredClone(e)})),o.remove()}),A.append(o)}},K=()=>{let e=localStorage.getItem("language")==="spanish"?["La Reserva Gatuna","Galería de Gatitos","El Museo del Minino","El Archivo de las Nueve Vidas","La Coleccion Miau","La Purr-folio","El Cat-álogo"]:["Purr-fect Pulls","The Kitty Cache","Whisker Vault","Paw-picked Cards","The Meowstash","Purrfolio","The Cat-alog"];document.getElementById("headline").innerText=e[Math.floor(Math.random()*e.length)]};let S=Number(localStorage.getItem("points"))||localStorage.setItem("points",0)||0;const W=localStorage.getItem("giftDate")||0;let Y=localStorage.getItem("language")==="spanish",Q=localStorage.getItem("language")==="english";const z={english:"A fun app for cat lovers to learn more about cats while looking at cute cats. Come in every day of the week to get up to 35 new cat pictures!",spanish:"Una aplicación divertida para amantes de los gatos donde puedes aprender más sobre los gatos mientras miras gatitos adorables. ¡Entra todos los días de la semana para obtener hasta 35 nuevas fotos de gatos!"},w=document.querySelector("#app"),b=document.getElementById("points");w&&(K(),Y?J():Q&&B());b&&(b.innerText=" "+S);function M(){localStorage.setItem("points",S),b&&(b.innerText=" "+S)}const I=document.getElementById("daily"),X=new Date,$=String(X.toLocaleDateString("en-GB"));I&&(W==$&&I.setAttribute("disabled",!0),I.addEventListener("click",()=>{localStorage.setItem("giftDate",$),I.setAttribute("disabled",!0),S+=5,M()}));const N=document.getElementById("pop-up"),T=document.getElementById("inject"),j=document.querySelector("#reload");N&&document.getElementById("generate").addEventListener("click",()=>{N.classList.remove("-translate-y-full"),G()});T&&T.addEventListener("click",e=>{const t=e.target.closest("li");t&&(t.classList.contains("chosen")?(t.classList.remove("chosen"),t.classList.add("unchosen")):document.querySelectorAll(".chosen").length<S&&(t.classList.remove("unchosen"),t.classList.add("chosen")))});j&&j.addEventListener("click",()=>{T.innerHTML="",G()});const H=document.getElementById("next");H&&H.addEventListener("click",()=>{N.classList.add("-translate-y-full");const e=document.querySelectorAll(".chosen"),t=localStorage.getItem("language")==="spanish";for(let n of e)t?D.push(C[n.dataset.id]):q.push(C[n.dataset.id]);S-=e.length,M(),w.innerHTML="",t?(localStorage.setItem("spanishCollection",JSON.stringify({data:structuredClone(D)})),J()):(localStorage.setItem("collection",JSON.stringify({data:structuredClone(q)})),B())});const E=document.querySelector(".switch"),k=document.getElementById("play"),U=document.getElementById("para");E&&E.addEventListener("click",()=>{const t=localStorage.getItem("language")==="spanish"?"english":"spanish";localStorage.setItem("language",t),w&&(w.innerHTML="",K()),k&&(k.innerHTML=t==="spanish"?"Comenzar":"Start",U.innerHTML=z[t]),t==="spanish"?J():B(),t==="spanish"?E.classList.add("switch-on"):E.classList.remove("switch-on")});E&&localStorage.getItem("language")==="spanish"&&E.classList.add("switch-on");const P=document.getElementById("form-pop-up"),O=document.querySelector("form"),Z=document.getElementById("form-btn"),ee=document.getElementById("submit"),te=document.getElementById("close-form");te.addEventListener("click",e=>{e.preventDefault(),P.classList.add("-translate-y-full")});Z.addEventListener("click",()=>P.classList.remove("-translate-y-full"));ee.addEventListener("click",async e=>{if(e.preventDefault(),O.elements.feedback.value.length<=20)return alert("hey.... make it longer!");P.classList.add("-translate-y-full");try{(await fetch("https://formspree.io/f/xaqdalyq",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({feedback:O.elements.feedback.value})})).ok?(alert("thank you for your feedback"),S+=10,M(),O.reset()):alert("Something went wrong.")}catch(t){console.error(t),alert("Network error.")}});if(k){const e=localStorage.getItem("language")||"english";k.innerHTML=e==="spanish"?"Comenzar":"Start",U.innerHTML=z[e]}
